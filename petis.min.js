/** Petis 0.0.1 Z Rev3 | @author Dali Kewara <dalikewara@windowslive.com> | Read license.txt or https://opensource.org/licenses/MIT */
!function(){"use strict";function r(a,b,c,d){var e=function(a,b,d){for(var e=a.target;e&&e!==b;)Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){for(var b=(this.document||this.ownerDocument).querySelectorAll(a),c=b.length;--c>=0&&b.item(c)!==this;);return c>-1}),e.matches(d)&&c.call(e,a),e=e.parentNode};document.addEventListener?document.addEventListener(a,function(a){e(a,this,b)},d):document.attachEvent("on"+a,function(a){e(a,this,b)},d)}function s(a,c){if(g(a)){var d=document.createElement(a);if(c&&i(c)){var f,h,j,k,l,m,n,o;for(f=b.obj(c,"length"),j=b.obj(c,"key"),l=b.obj(c,"value"),n=0;n<f;n++)if(i(l[n])&&"style"===j[n])for(h=b.obj(l[n],"length"),k=b.obj(l[n],"key"),m=b.obj(l[n],"value"),o=0;o<h;o++)d[e(j[n])][k[o]]=m[o];else d[e(j[n])]=l[n]}return d}return!1}function t(a,c,d,f){n(f)||(a=g(f)?b.get(f):f);var h=function(a){return n(d)?Element.prototype.getAttribute?a.getAttribute(e(c)):a[e(c)]:void(a[e(c)]=d)};if(m(a)){for(var i=0,j=[],k=a.length;i<k;i++)j[i]=h(a[i]);return j}return h(a)}function u(a,c,d){if(!i(c))return f("Style properties must be write as an object!");n(d)||(a=g(d)?b.get(d):d);var h=function(a){for(var d=b.obj(c,"length"),f=b.obj(c,"key"),g=b.obj(c,"value"),h=0;h<d;h++)a.style[e(f[h])]=g[h]};if(m(a))for(var j=a.length,k=0;k<j;k++)h(a[k]);else h(a)}function v(a,b,c){var d={};d.append=function(){g(c)?a.appendChild(c):a.appendChild(c)},d.inner=function(){a.innerHTML=g(c)?c:c.outerHTML},d[b]()}function w(a,c,d){var e={};e.hide=function(){n(d)||(a=g(d)?b.get(d):d),u(a,{display:"none",visibility:"hidden"},a)},e.show=function(){n(d)||(a=g(d)?b.get(d):d),u(a,{display:"block",visibility:"visible"},a)},e[c]()}function x(a,c,d){var e={};return e.dropdown=function(){if(!q(d.toShowed))return f("You have to add (.toShowed) key and pass an element or element attribute when using (.dropDown)!");g(d.toShowed)&&(d.toShowed=b.get(d.toShowed));var c=function(){(d.toShowed.dataset.toggled^=1)?w(a,"show",d.toShowed):w(a,"hide",d.toShowed)};q(d.event)&&""!=d.event?a.addEventListener(d.event,function(){c()}):c()},e[c]()}function y(a,b){if(!q(b.name))return f("Validation (.name) is not defined!");q(b.index)&&""!=b.index?b.index=b.index:b.index=a.value;var c={};return c.length=function(){return q(b.max)?b.index.length>b.max?q(b.onFalse)?b.onFalse():alert("The length value of this input must under "+b.max+" characters!"):void 0:f("You have to set (.max) number in length validation!")},c[b.name]()}function z(a,c){var d=0,e=a.length;if(n(c))for(;d<e;d++)b.list.form.elemSelector.indexOf(Object.prototype.toString.call(a[d]))<0||(b.list.form.specialAttr.indexOf(a[d].type)<0||!(b.list.form.specialAttr.indexOf(a[d].type)<0)&&(a[d].hasAttribute("checked")||a[d].hasAttribute("selected")))&&(b.str+=b.encode(a[d].name,"standart")+"="+b.encode(a[d].value,"standart")+"&");return b.str}function A(a){var c=q(a.method)?a.method:"GET",d=!!q(a.url)&&a.url,e=!!q(a.target)&&(g(a.target)?b.get(a.target):a.target),f=!!q(a.data)&&a.data,h=!!q(a.eventType)&&a.eventType,i=!(!q(a.complete)||!j(a.complete))&&a.complete,k=!(!q(a.error)||!j(a.error))&&a.error,l=!q(a.async)||a.async;if(window.XMLHttpRequest)var n=new XMLHttpRequest;else var n=new ActiveXObject("Microsoft.XMLHTTP");n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){if("load"===h)if(m(e))for(var a=e.length,b=0;b<a;b++)e[b].innerHTML=this.responseText;else e.innerHTML=this.responseText;i&&i(this.responseText)}else k&&k(this.responseText)},n.open(c,d,l),"POST"===c?n.setRequestHeader("Content-type","application/x-www-form-urlencoded"):n.setRequestHeader("Content-type","text/html"),n.send(f)}var a=function(a){var c=a;a=g(a)?b.get(a):a,this.get=a,this.val=q(a)?a.value:null,this.version=b.version,this.on=function(a,b,d){return r(a,c,b,d)},this.create=function(a,b){return s(a,b)},this.remove=function(){},this.removeAttr=function(){},this.load=function(b,c){n(c)&&(c=null),A({url:b,method:"GET",eventType:"load",target:a,complete:c})},this.attr=function(b,c){return t(a,b,c)},this.style=function(b,c){u(a,b,c)},this.append=function(b){v(a,"append",b)},this.inner=function(b){v(a,"inner",b)},this.hide=function(){w(a,"hide")},this.show=function(){w(a,"show")},this.dropDown=function(b){x(a,"dropdown",b)},this.validation=function(b){return y(a,b)},this.getFormData=function(b){return z(a,b)}},b={};b.version="0.0.1 Rev 3",b.rev="3",b.debug="off",b.str="",b.num=0,b.elem=document,b.uri=window.location.href,b.regex={attribute:{value:{complete:/[\(][\(][ a-z0-9\=\;\"\'\@\{\}\[\]\<\>\.\,\/\?\:\(\)\%\#\$\*\!\_\+\-]+[\)][\)]/gi,left:/[a-z0-9 ]+[\(][\(]|[\(][\(]/gi,right:/[\)][\)][a-z0-9 ]+|[\)][\)]/gi},separator:/[ ]+[&][&][ ]+|[&][&]|[ ]+[&][&]|[&][&][ ]+/g},space:/\s+/g,selector:/[:][:][0-9]+|[:][:]/g},b.list={attribute:{fake:["class"],real:["className"]},uri:{actions:["split","check","replace"]},element:{effects:["show","hide"],placements:["inside of","force inside of","bottom of","top of"],features:["toggleDropdown"]},features:["validation"],form:{elemSelector:["[object HTMLInputElement]","[object HTMLTextAreaElement]","[object HTMLSelectElement]"],specialAttr:["radio","checkbox"]}},b.init=function(c){var d=function(){window.Petis=window.petis=function(c){if(i(c)){if(q(c.debug)&&"on"===c.debug)return b.debug=c.debug,!0;if(q(c.clean)&&c.clean===!0)return delete window.Petis,delete window.petis,!0;if(q(c.ajax)&&c.ajax===!0)return A(c),!0;if(q(c.uri)&&c.uri===!0)return!0;if(q(c.encode))return q(c.type)?b.encode(c.encode,c.type):b.encode(c.encode,"standart")}else j(c)&&(document.onreadystatechange=function(){if("complete"==document.readyState)return c()},document.addEventListener("interactive",c,!1),document.addEventListener("complete",c,!1));return new a(c)}};h(c)&&c!==!1?(document.removeEventListener("DOMContentLoaded",b.init()),document.removeEventListener("load",b.init()),d()):d()},b.get=function(a){var b=c(a),e=d(a,b);return"."===b?document.getElementsByClassName(e):"#"===b?document.getElementById(e):"@"===b?document.getElementsByName(e):document.getElementsByTagName(e)},b.encode=function(a,b){if("standart"===b&&encodeURIComponent)return encodeURIComponent(a)},b.obj=function(a,b){if(i(a))switch(b){case"length":if(Object.keys)return Object.keys(a).length;var c=0,d=0;for(c in a)d+=Number(a.hasOwnProperty(c));return d;case"key":if(Object.keys)return Object.keys(a);var c=0,e=[],f=0;for(c in a)e[f]=c,f++;return e;case"value":var c=0,g=[],f=0;for(c in a)g[f]=a.hasOwnProperty(c)?a[c]:null,f++;return g;default:return!1}return!1};var c=function(a){return a[0]},d=function(a,c){return c?a.replace(c,"").replace(b.regex.selector,""):a.replace(b.regex.selector,"")},e=function(a){return p(a)?b.list.attribute.real[b.list.attribute.fake.indexOf(a)]:a},f=function(a){return"on"===b.debug&&a},g=function(a){return"[object String]"===Object.prototype.toString.call(a)},h=function(a){return"[object Boolean]"===Object.prototype.toString.call(a)},i=function(a){return"[object Object]"===Object.prototype.toString.call(a)&&"object"==typeof a},j=function(a){return"[object Function]"===Object.prototype.toString.call(a)},m=function(a){return"[object HTMLCollection]"===Object.prototype.toString.call(a)},n=function(a){return"undefined"==typeof a},o=function(a,b){return!(a.indexOf(b)<0)},p=function(a){return!!o(b.list.attribute.fake,a)},q=function(a){return"undefined"!=typeof a};"complete"===document.readyState||"loading"!==document.readyState?window.setTimeout(b.init()):(document.addEventListener("DOMContentLoaded",b.init(!0)),window.addEventListener("load",b.init(!0)))}();
